---
import NavIndicator from "../components/icons/NavIndicator.astro";

---

<script>
    const items = document.querySelectorAll('.nav-item');
    const ball = document.querySelector('.ball') as HTMLElement;

    items.forEach(item => {
        item.addEventListener('click', (e) => {
            const target = e.target as HTMLElement;
            const position = (e.target as HTMLElement).getAttribute('data-position');
            if (position !== null) {
                const targetRect = target.getBoundingClientRect();
                    const containerRect = target.parentElement?.getBoundingClientRect();
                    if (containerRect) {
                        const offsetY = targetRect.top - containerRect.top + (targetRect.height / 2) - (ball.getBoundingClientRect().height / 2);
                        if (ball !== null) {
                            ball.style.transform = `translateY(-${offsetY-30 > 0 ? offsetY-30 : 0}px)`;
                        }
                    }
                // const positionNumber = Number(position);
                // (ball as HTMLElement).style.transform = `translateY(-${positionNumber * 86}px)`;
            }
        });
    });
</script>
<div class="flex flex-col justify-center items-center rotate-180 text-xs font-medium gap-3 text-white bg-[#AC2B2A] rounded-tl-lg rounded-bl-lg w-full py-6">
    <div class="ball absolute -left-6 bottom-10 w-10 h-10 rounded-full z-0  text-[#AC2B2A]"><NavIndicator /></div>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="8">Guarniciones</span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="7">Postres</span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="6">Tacos</span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="5">Botanas</span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="4">A la carta </span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="3">Ensaladas</span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="2">Burritos</span>
    <span class="[writing-mode:vertical-rl] nav-item z-10" data-position="1">Burguer</span>
</div>

<style>
    .ball {
        /* transition: transform .5s cubic-bezier(.68,-0.55,.27,1.55); */
        transition: transform .4s cubic-bezier(.73, -0.35,.67,1.40)
        
        /* transition: transform .3s ease-out; */
    }
</style>